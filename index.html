<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Revue d'actualitÃ©s</title>
<style>
body { font-family: 'Segoe UI', sans-serif; background:#f5f7fa; margin:0; padding:20px;}
.feed-grid { display:grid; grid-template-columns:repeat(auto-fill,minmax(280px,1fr)); gap:20px; }
.card {
  background:white;
  padding:15px;
  border-radius:12px;
  box-shadow:0 4px 12px rgba(0,0,0,0.08);
}
.card h3 { font-size:1rem; margin:10px 0; }
.card a { text-decoration:none; color:#1a1a1a; }
.meta { font-size:0.8em; color:#666; }
.pagination { text-align:center; margin-top:30px; }
.pagination button {
  margin:5px;
  padding:8px 12px;
  border:none;
  border-radius:6px;
  background:#e0e6ed;
  cursor:pointer;
}
.pagination button.active {
  background:#2d3748;
  color:white;
}
</style>
</head>
<body>

<h2>ðŸ“° Revue d'actualitÃ©s â€“ GÃ©nÃ©alogie & Archives</h2>
<div id="content">Chargementâ€¦</div>
<div id="pagination" class="pagination"></div>

<script src="https://cdn.jsdelivr.net/npm/rss-parser/dist/rss-parser.min.js"></script>
<script>
const feeds = [
"https://www.archivistes.org/spip.php?page=backend",
"https://leblog-ffg.over-blog.org/rss",
"https://www.filae.com/ressources/blog/feed",
"http://www.francegenweb.org/blog/index.php?feed/rss2",
"https://www.geneatique.com/blog/feed",
"https://home.heredis.com/feed",
"https://blog.myheritage.fr/feed/",
"https://www.genefede.eu/feed",
"https://geneafinder.com/rss/rss.xml",
"https://www.genealogiepratique.fr/feed",
"http://genealogie-magazine.over-blog.com/rss",
"https://www.geneanet.org/blog/feed",
"https://geneatech.fr/feed",
"https://www.histoire-genealogie.com/spip.php?page=backend",
"https://www.rfgenealogie.com/rss.xml",
"https://www.quotidien-genealogie.fr/feed",
"https://www.piaf-archives.org/taxonomy/term/6/feed"
];

const parser = new RSSParser();
let allItems = [];
let currentPage = 1;
const perPage = 9;

async function loadFeeds() {
  for (let url of feeds) {
    try {
      let feed = await parser.parseURL(url);
      feed.items.forEach(item => {
        allItems.push({
          title: item.title,
          link: item.link,
          pubDate: new Date(item.pubDate),
          source: feed.title
        });
      });
    } catch(e) {
      console.log("Erreur:", url);
    }
  }

  allItems.sort((a,b)=>b.pubDate-a.pubDate);
  displayPage(1);
  setupPagination();
}

function displayPage(page){
  currentPage=page;
  const start=(page-1)*perPage;
  const end=start+perPage;
  const items=allItems.slice(start,end);

  let html='<div class="feed-grid">';
  items.forEach(item=>{
    html+=`
    <div class="card">
      <div class="meta">${item.source}</div>
      <h3><a href="${item.link}" target="_blank">${item.title}</a></h3>
      <div class="meta">${item.pubDate.toLocaleDateString()}</div>
    </div>`;
  });
  html+='</div>';
  document.getElementById("content").innerHTML=html;
}

function setupPagination(){
  const total=Math.ceil(allItems.length/perPage);
  let html="";
  for(let i=1;i<=total;i++){
    html+=`<button onclick="displayPage(${i})">${i}</button>`;
  }
  document.getElementById("pagination").innerHTML=html;
}

loadFeeds();
</script>

</body>
</html>
